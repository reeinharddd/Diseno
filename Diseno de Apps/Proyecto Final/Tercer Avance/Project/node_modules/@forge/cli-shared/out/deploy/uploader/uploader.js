"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ui_1 = require("../../ui");
class AppArchiveUploader {
    constructor(getConfiguredApp, artifact, uploader, logger) {
        this.getConfiguredApp = getConfiguredApp;
        this.artifact = artifact;
        this.uploader = uploader;
        this.logger = logger;
    }
    async uploadArchive(archivePath) {
        this.logger.info(ui_1.Text.deploy.taskUpload.title);
        const appDetails = await this.getConfiguredApp();
        const uploadUrl = await this.artifact.getUploadUrl(appDetails);
        this.logger.debug(ui_1.Text.deploy.taskUpload.uploadingArchive(uploadUrl));
        await this.uploader.uploadFromPath(uploadUrl, archivePath);
        return uploadUrl;
    }
}
exports.AppArchiveUploader = AppArchiveUploader;
