"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const conf_1 = tslib_1.__importDefault(require("conf"));
class CachedConf {
    constructor(projectName) {
        this.conf = new conf_1.default({
            projectName
        });
    }
    get(key) {
        const result = this.conf.get(key);
        if (!result) {
            return undefined;
        }
        if (result.expiry && Date.now() > result.expiry) {
            return undefined;
        }
        return result.value;
    }
    set(key, value, age) {
        this.conf.set(key, {
            value,
            expiry: age ? Date.now() + age : undefined
        });
    }
    delete(key) {
        this.conf.delete(key);
    }
    static getCache(projectName) {
        return new CachedConf(projectName);
    }
}
exports.CachedConf = CachedConf;
