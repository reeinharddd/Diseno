"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class PackageUploadDeployCommand {
    constructor(packager, archiveUploader, deployer) {
        this.packager = packager;
        this.archiveUploader = archiveUploader;
        this.deployer = deployer;
    }
    async execute(details) {
        const { archivePath, moduleList } = await this.packager.package(details.handlers);
        const uploadUrl = await this.archiveUploader.uploadArchive(archivePath);
        await this.deployer.deploy(details.environmentKey, uploadUrl);
        return { analytics: { moduleList } };
    }
}
exports.PackageUploadDeployCommand = PackageUploadDeployCommand;
