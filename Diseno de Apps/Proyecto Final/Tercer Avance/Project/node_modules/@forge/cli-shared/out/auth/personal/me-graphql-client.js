"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ui_1 = require("../../ui");
class UserNotFoundError extends Error {
}
exports.UserNotFoundError = UserNotFoundError;
class MeGraphqlClient {
    constructor(graphqlClient, logger) {
        this.graphqlClient = graphqlClient;
        this.logger = logger;
    }
    async getUser() {
        try {
            const query = '{me {user {name accountStatus accountId}}}';
            const result = await this.graphqlClient.query(query, {});
            if (result.me.user && result.me.user.accountStatus === 'active') {
                return result.me.user;
            }
        }
        catch (error) {
            this.logger.debug(ui_1.errorMessage(error));
        }
        throw new UserNotFoundError();
    }
}
exports.MeGraphqlClient = MeGraphqlClient;
