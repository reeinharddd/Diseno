"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const parser_interface_1 = require("./parser-interface");
const path_1 = tslib_1.__importDefault(require("path"));
const typescript_estree_1 = require("@typescript-eslint/typescript-estree");
exports.tsParser = async (code, filepath) => {
    const absoluteFilePath = path_1.default.resolve(process.cwd(), filepath);
    const parseResult = typescript_estree_1.parseAndGenerateServices(code, {
        errorOnTypeScriptSyntacticAndSemanticIssues: true,
        loc: true,
        filePath: absoluteFilePath,
        tsconfigRootDir: process.cwd(),
        project: './tsconfig.json'
    });
    return {
        type: parser_interface_1.ParserTypes.ESTree,
        parsed: parseResult.ast,
        traverse: (options) => {
            typescript_estree_1.simpleTraverse(parseResult.ast, options);
        }
    };
};
